<!DOCTYPE html>
<html lang="en">
<!--
MIT License

Copyright (c) 2019 Loh Yu Chen & Chi Junxiang

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
================================================================================-->

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>
        {% if type == "upload" %}
            Surveyinator - Upload
        {% elif type == "analysis" %}
            Surveyinator - Analysis of {{ filename }}
        {% elif type == "error" %}
            {{ error_no }} - {{ error_message }}
        {% elif type == "faq" %}
            Surveyinator - FAQ
        {% endif %}
    </title>
    <link rel="icon" href="/static/favicon.ico">
    <link rel="stylesheet" href="/static/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="/static/fonts/fontawesome-all.min.css">
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.js"></script>
    <script src="/static/bootstrap/js/bootstrap.min.js"></script>
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/chart.min.js"></script>
    <script src="/static/js/bs-charts.js"></script>
    <script src="/static/js/theme.js"></script>
</head>

{% if type == "analysis" or type == "config" or type == "faq" %}
    <body id="page-top">
    <div id="page-container">
    <div id="content-wrap">
    <div id="wrapper">
    <div class="d-flex flex-column" id="content-wrapper">
    <div id="content">
    <nav class="navbar navbar-light navbar-expand bg-white shadow mb-4 topbar static-top">
        <div class="container-fluid">
            <div class="card text-white bg-primary shadow">
                <div class="card-body">
                    <a class="navbar-brand d-flex justify-content-center align-items-center sidebar-brand m-0"
                       href="/">
                        <div class="sidebar-brand-icon rotate-n-15" style="color: rgba(255,255,255,0.9);"><i
                                class="fas fa-bar-chart"></i></div>
                        <div class="sidebar-brand-text mx-3"><span
                                style="color: rgba(255,255,255,0.9);">Surveyinator</span>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </nav>
{% endif %}
{% if type == "analysis": %}
    <div class="container-fluid">
        <div class="d-sm-flex justify-content-between align-items-center mb-4">
            <h3 class="text-dark mb-0">Analysis Report</h3>
            <a class="btn btn-primary btn-sm d-none d-sm-inline-block" role="button"
               href="/download/{{ path }}"><i class="fas fa-download fa-sm text-white-50"></i>&nbsp;Generate
                Report</a>
        </div>
        {% for group in numerical %}
            <div class="row">
                {% for nums in group %}
                    <div class="col-md-6 col-xl-3 mb-4">
                        <div class="card shadow border-left-primary py-2">
                            <div class="card-body">
                                <div class="row align-items-center no-gutters">
                                    <div class="col mr-2">
                                        <div class="text-uppercase text-primary font-weight-bold text-xs mb-1">
                                            <span>{{ nums[0] }}</span></div>
                                        <div class="text-dark font-weight-bold h5 mb-0">
                                            {% for type, value in nums[1].items() %}
                                                <span>{{ type }}: {{ value }}</span><br>
                                            {% endfor %}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% endfor %}

        {% for group in graphs %}
            <div class="row">
                {% for graph in group %}
                    <div class="col-lg-4 col-xl-4">
                        <div class="card shadow mb-4">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h6 class="text-primary font-weight-bold m-0">{{ graph[0] }}</h6>
                            </div>
                            <div class="card-body">
                                {{ graph[1] }}
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% endfor %}

        {% for group in clouds %}
            <div class="row">
                {% for cloud in group %}
                    <div class="col-md-6 col-xl-6" height="100%">
                        <div class="card shadow mb-4">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h6 class="text-primary font-weight-bold m-0">{{ cloud[0] }}</h6>
                            </div>
                            <div class="card-body">
                                <img src="{{ cloud[1] }}" width="100%">
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% endfor %}
    </div>
    </div>
    </div>
    </div>

{% elif type == "upload" %}

    <body class="bg-gradient-primary">
    <div id="page-container">
        <div id="content-wrap">
            <div id="loading" style="display:none;">
                <div class="spinner">
                    <div class="bounce1"></div>
                    <div class="bounce2"></div>
                    <div class="bounce3"></div>
                </div>
            </div>
            <div id="content" class="container">
                <div class="row justify-content-center">
                    <div class="col-md-9 col-lg-12 col-xl-10">
                        <div class="card shadow-lg o-hidden border-0 my-5">
                            <div class="card-body p-0">
                                <div class="p-5">
                                    <div class="text-center">
                                        <h1 class="text-dark mb-4">Surveyinator</h1>
                                    </div>
                                    <form name="form" action="/results" method="post" enctype="multipart/form-data">
                                        <h4>Excel/csv file: </h4>
                                        <div id="dropContainer" class="uploadcontainer text-black shadow"
                                             style="text-align:center">
                                            <div id="uploadstuff">
                                                <img src="static/upload.png" width=50px/>
                                                <h3>Drag and Drop</h3>
                                                <p>or</p>
                                                <label class="btn btn-primary" style="cursor: pointer;"><input
                                                        name="file"
                                                        style="display: none;"
                                                        type="file"
                                                        accept=".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"
                                                        id="fileInput"/>click
                                                    here to upload...</label>
                                            </div>
                                            <div id="uploadedstuff" style="display: none;">
                                                <h3>File uploaded</h3>
                                                <label style="cursor: pointer;" class="btn btn-primary" onclick="showUploaded();">Upload
                                                    again
                                                </label>
                                            </div>
                                        </div>
                                        <br>
                                        <h4>Config file: </h4>
                                        <div id="dropContainer2" class="uploadcontainer text-black shadow"
                                             style="text-align:center">
                                            <div id="uploadstuff2">
                                                <img src="static/upload.png" width=50px/>
                                                <h3>Drag and Drop</h3>
                                                <p>or</p>
                                                <label class="btn btn-primary" style="cursor: pointer;"><input
                                                        style="display: none;" type="file" name="config"
                                                        accept="text/plain"
                                                        id="fileInput2"/>click here to upload...</label>
                                            </div>

                                            <div id="uploadedstuff2" style="display: none;">
                                                <h3>File uploaded</h3>
                                                <label style="cursor: pointer;" class="btn btn-primary" onclick="showUploaded2();">Upload
                                                    again
                                                </label>
                                            </div>
                                        </div>
                                        <br>
                                        <script src="static/js/draganddrop.js"></script>
                                        <input class="btn btn-primary" type="submit" value='Analyse'
                                               onclick="loading.style.display = 'block';content.style.display = 'none'"
                                               ;>
                                    </form>
                                </div>
                                {% if error %}
                                    <div class="text-center">
                                        <div class="alert alert-danger">{{ error }}</div>
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            {% elif type == "config" %}
            <div id="loading" style="display:none;">
                <div class="spinner">
                    <div class="bounce1" style="background-color: #4e73df"></div>
                    <div class="bounce2" style="background-color: #4e73df"></div>
                    <div class="bounce3" style="background-color: #4e73df"></div>
                </div>
            </div>
            <div id="container-fluid" class="container-fluid">
                <div class="container-fluid">
                    <h3 class="text-dark mb-4">Config</h3>
                    <div class="card shadow">
                        <div class="card-header py-3">
                            <p class="text-primary m-0 font-weight-bold">Question type</p>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive table mt-2" id="dataTable" role="grid"
                                 aria-describedby="dataTable_info">
                                <form id="configform" action="/config" method="post">
                                    <table class="table dataTable my-0" id="dataTable">
                                        <thead>
                                        <tr>
                                            <th>Question</th>
                                            <th>Type</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        {% for question in questions: %}
                                            <tr>
                                                <td>{{ question[1] }}</td>
                                                <td>
                                                    <div class="form-group">
                                                        <select form="configform" class="form-control"
                                                                name="{{ question[0] }}">
                                                            <option value="ignore"
                                                                    {% if question[2] == "ignore": %}selected{% endif %}>
                                                                Ignore
                                                            </option>
                                                            <option value="numerical"
                                                                    {% if question[2] == "numerical": %}selected{% endif %}>
                                                                Numerical
                                                            </option>
                                                            <option value="openended"
                                                                    {% if question[2] == "openended": %}selected{% endif %}>
                                                                Open-ended
                                                            </option>
                                                            <option value="categorical"
                                                                    {% if question[2] == "categorical": %}selected{% endif %}>
                                                                Categorical
                                                            </option>
                                                            <option value="multicategorical"
                                                                    {% if question[2] == "multicategorical": %}selected{% endif %}>
                                                                Multi-categorical
                                                            </option>
                                                        </select>
                                                    </div>
                                                </td>
                                            </tr>
                                        {% endfor %}
                                        </tbody>
                                    </table>
                                    <input class="btn btn-primary" type="submit"
                                           onclick="$('#loading').show();$('#container-fluid').hide();">
                                </form>
                            </div>


                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
{% elif type == "error" %}
    <body id="page-top">
    <div id="page-container">
    <div id="content-wrap">
    <div id="wrapper">

        <div class="d-flex flex-column" id="content-wrapper">
            <div id="content">

                <div class="container-fluid">
                    <div class="text-center mt-5">
                        <div class="error mx-auto" data-text="{{ error_no }}">
                            <p class="m-0"> {{ error_no }} </p>
                            <p class="text-dark mb-5 lead">{{ error_message }}</p>
                        </div>
                        {% if error %}
                            <div class="text-center">
                                <div class="alert alert-danger">{{ error }}</div>
                            </div>
                        {% endif %}
                        <p class="text-black-50 mb-0">It looks like you found a glitch in the matrix...</p><a
                            href="/">←
                        Back to upload page</a>
                        <p><a href="/faq">←
                            or head over to the FAQ</a></p></div>

                </div>
            </div>
            {% elif type == "faq" %}
            <div class="container-fluid">
                <div class="d-sm-flex justify-content-between align-items-center mb-4">
                    <h3 class="text-dark mb-0">Frequently Asked Questions</h3>
                </div>
                <div class="faqgroup">
                    <button class="accordion">How to use?</button>
                    <div class="panel">
                        <p>If you are using google forms:</p>
                        <p>1. Export a google form result (from the google sheet) as .csv</p>
                        <p>Otherwise,</p>
                        <p>1. Create a config file, either manually (see below) or through the <a href="/">website</a>
                            (continue)</p>
                        <p>2. Upload the excel/csv file and the config file (if you made it) through the website</p>
                        <p>3. If you have not submitted the config file, do so with the config page.</p>
                    </div>
                </div>
                <div class="faqgroup">
                    <button class="accordion">How to make config_file for various types of google forms qn</button>
                    <div class="panel">
                        <p>Config file format: [question number] [type of question]</p>
                        <p>Accepted types are: ignore, numerical, categorical, openended and multicategorical</p>
                        <p>Example:</p>
                        <pre><code>1 ignore<br>2 numerical<br>3 categorical<br>4 openended<br>5 multicategorical</code></pre>
                        <h4>Short answer (openended)</h4>
                        <img src="static/faq/shortanswer.jpeg" height="10%">
                        <br>
                        <h4>Paragraph (openended)</h4>
                        <img src="static/faq/paragraph.jpeg" height="10%">
                        <br>
                        <h4>Multiple choice (categorical)</h4>
                        <img src="static/faq/multiplechoice.jpeg" height="10%">
                        <br>
                        <h4>Checkbox (multicategorical)</h4>
                        <img src="static/faq/checkbox.jpeg" height="10%">
                        <br>
                        <h4>Dropdown (categorical)</h4>
                        <img src="static/faq/dropdown.jpeg" height="10%">
                        <br>
                        <h4>Linear scale (numerical)</h4>
                        <img src="static/faq/linearscale.jpeg" height="10%">
                        <br>
                        <h4>Multiple choice grid (categorical)</h4>
                        <br>
                        <h4>Checkbox grid (multicategorical)</h4>
                        <br>
                        <h4>Date and Time (ignore)</h4>
                        <img src="static/faq/dateandtime.jpeg" height="10%">
                    </div>
                </div>
                <div class="faqgroup">
                    <button class="accordion">What sorts of data cannot be analysed</button>
                    <div class="panel">
                        <p>Surveyinator is unable to analyse the following types of responses:</p>
                        <ul>
                            <li>Timestamps</li>
                            <li>Time</li>
                            <li>Date</li>
                        </ul>
                        <p>That's it! :D</p>
                    </div>
                    <script src="static/js/accordion.js"></script>

                </div>
            </div>
        </div>
    </div>

{% endif %}
</div>
<footer id="footer" style="background-color: white;">
    <div class="container my-auto center">
        <div class="text-center my-auto"><span>Made with ♥ by Loh Yu Chen & Chi Junxiang 2019</span></div>
        <div class="text-center my-auto"><span>View <a href="https://github.com/Ycmelon/cssurvey/"
                                                       target="_blank">source</a> | <a href="/faq">FAQ</a></span>
        </div>
        <div class="text-center my-auto">Icons made by <a href="https://www.flaticon.com/authors/freepik"
                                                          title="Freepik">Freepik</a> from <a
                href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a> is licensed by <a
                href="https://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0" target="_blank">CC
            3.0 BY</a></div>
    </div>
</footer>
</div>
</div>
</div>
</body>

</html>